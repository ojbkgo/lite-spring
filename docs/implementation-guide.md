# Lite Spring 实现指南索引

本目录包含各个阶段的详细实现指南，帮助你一步步实现整个框架。

## 📚 文档结构

### 规划文档
- **roadmap.md** - 整体学习路线图（必读）
- **architecture.md** - 架构设计文档
- **progress.md** - 开发进度记录
- **quickstart.md** - 快速开始指南

### 分阶段实现指南
- **phase1-ioc-container.md** - 第一阶段：IoC容器基础 ✅ 已完成
- **phase2-dependency-injection.md** - 第二阶段：依赖注入（待创建）
- **phase3-bean-lifecycle.md** - 第三阶段：Bean生命周期（待创建）
- **phase4-annotation-driven.md** - 第四阶段：注解驱动（待创建）
- **phase5-aop.md** - 第五阶段：AOP（待创建）
- **phase6-mvc.md** - 第六阶段：MVC框架（待创建）
- **phase7-data-access.md** - 第七阶段：数据访问（待创建）
- **phase8-transaction.md** - 第八阶段：事务管理（待创建）
- **phase9-auto-configuration.md** - 第九阶段：自动配置（待创建）

---

## 🚀 如何使用这些指南

### 学习流程

1. **阅读roadmap.md**
   - 了解整体规划
   - 理解每个阶段的目标

2. **阅读对应阶段的实现指南**
   - 理解理论知识
   - 学习设计思路
   - 参考实现步骤

3. **动手编写代码**
   - 先写测试用例
   - 再实现功能
   - 运行测试验证

4. **思考和优化**
   - 思考指南中的问题
   - 对比Spring源码
   - 重构代码

5. **记录进度**
   - 在progress.md中记录
   - 写下心得体会
   - 记录遇到的问题

### 学习建议

✅ **DO（应该做）**：
- 按顺序完成各个阶段
- 理解每一行代码的含义
- 编写充分的测试用例
- 遇到问题先自己思考
- 完成后对比Spring源码
- 持续重构和优化代码

❌ **DON'T（不要做）**：
- 不要跳过阶段
- 不要只复制粘贴代码
- 不要忽略测试
- 不要遇到问题就放弃
- 不要追求完美而停滞不前

---

## 📖 各阶段概览

### 第一阶段：IoC容器基础（1-2周）

**目标**：实现简单的Bean工厂

**核心内容**：
- BeanDefinition
- BeanFactory
- DefaultBeanFactory
- XML配置解析

**学习收获**：
- 理解IoC的核心思想
- 掌握反射的使用
- 学习工厂模式
- 了解Bean的创建过程

**文档**：[phase1-ioc-container.md](./phase1-ioc-container.md)

---

### 第二阶段：依赖注入（1-2周）

**目标**：实现Bean之间的依赖关系

**核心内容**：
- 属性注入（setter）
- 构造器注入
- Bean引用解析
- 循环依赖处理（三级缓存）

**学习收获**：
- 理解依赖注入原理
- 掌握循环依赖解决方案
- 深入理解Bean创建过程
- 学习缓存设计

**文档**：待创建（你开始第二阶段时我会提供）

---

### 第三阶段：Bean生命周期（1周）

**目标**：完善Bean的生命周期管理

**核心内容**：
- 初始化回调
- 销毁回调
- BeanPostProcessor扩展点
- Aware接口

**学习收获**：
- 理解Bean的完整生命周期
- 掌握扩展点机制
- 学习模板方法模式
- 了解Spring的扩展性设计

**文档**：待创建

---

### 第四阶段：注解驱动（1-2周）

**目标**：支持注解配置，摆脱XML

**核心内容**：
- @Component及衍生注解
- @Autowired自动装配
- @Configuration配置类
- 类路径扫描

**学习收获**：
- 理解注解处理机制
- 掌握类路径扫描
- 学习Java反射高级应用
- 了解Spring注解驱动原理

**文档**：待创建

---

### 第五阶段：AOP（2-3周）⭐难点

**目标**：实现面向切面编程

**核心内容**：
- JDK动态代理
- CGLIB代理
- 切点表达式
- 通知类型（Before/After/Around）

**学习收获**：
- 理解AOP核心概念
- 掌握动态代理原理
- 学习代理模式
- 了解字节码增强技术

**文档**：待创建

---

### 第六阶段：MVC框架（2-3周）⭐难点

**目标**：实现Web MVC框架

**核心内容**：
- DispatcherServlet
- HandlerMapping
- @Controller和@RequestMapping
- 参数绑定
- JSON序列化

**学习收获**：
- 理解Spring MVC工作流程
- 掌握Servlet规范
- 学习前端控制器模式
- 了解HTTP请求处理

**文档**：待创建

---

### 第七阶段：数据访问（1-2周）

**目标**：简化数据库操作

**核心内容**：
- JdbcTemplate
- RowMapper
- 数据源管理
- 异常转换

**学习收获**：
- 理解JDBC封装原理
- 掌握模板方法模式
- 学习资源管理
- 了解异常体系设计

**文档**：待创建

---

### 第八阶段：事务管理（1-2周）⭐难点

**目标**：实现声明式事务

**核心内容**：
- PlatformTransactionManager
- @Transactional注解
- 事务传播机制
- 结合AOP实现

**学习收获**：
- 理解事务管理原理
- 掌握事务传播行为
- 深入理解AOP应用
- 了解数据库事务知识

**文档**：待创建

---

### 第九阶段：自动配置（2周）

**目标**：实现类似Spring Boot的启动

**核心内容**：
- @EnableAutoConfiguration
- 条件注解
- SPI机制
- 内嵌Tomcat

**学习收获**：
- 理解自动配置原理
- 掌握条件装配
- 学习SPI机制
- 了解约定优于配置

**文档**：待创建

---

### 第十阶段：完善优化（持续）

**目标**：提升框架质量

**核心内容**：
- 性能优化
- 异常处理完善
- 日志系统
- 配置文件支持
- 更多高级特性

**学习收获**：
- 优化技巧
- 生产级框架考量
- 工程化实践

**文档**：待创建

---

## 🎯 当前进度

- [x] 项目初始化
- [x] 第一阶段实现指南文档
- [ ] 第一阶段代码实现（进行中）

---

## 💡 学习资源

### 推荐阅读顺序

**第一阶段前**：
- Java反射机制
- XML解析（DOM/SAX）
- 设计模式：工厂模式、单例模式

**第二阶段前**：
- Java内省（Introspection）
- 设计模式：策略模式

**第五阶段前**：
- JDK动态代理
- CGLIB原理
- 设计模式：代理模式、责任链模式

**第六阶段前**：
- Servlet规范
- HTTP协议
- 设计模式：前端控制器模式、适配器模式

**第八阶段前**：
- 数据库事务原理
- ACID特性
- 事务隔离级别

### 参考书籍

1. **《Spring源码深度解析》** - 郝佳
   - 适合：所有阶段
   - 重点：IoC、AOP、事务

2. **《Spring揭秘》** - 王福强
   - 适合：前期阶段
   - 重点：基础原理讲解

3. **《设计模式》** - GoF
   - 适合：所有阶段
   - 重点：理解框架中的设计模式

4. **《Effective Java》** - Joshua Bloch
   - 适合：所有阶段
   - 重点：代码质量提升

### 在线资源

- [Spring Framework官方文档](https://spring.io/projects/spring-framework)
- [Spring源码GitHub](https://github.com/spring-projects/spring-framework)
- 各种技术博客和视频教程

---

## ❓ 获取帮助

### 我可以帮你的：

1. **理论讲解**
   - "什么是三级缓存？"
   - "为什么需要BeanPostProcessor？"

2. **设计讨论**
   - "我想用这种方式实现，你觉得怎么样？"
   - "这两种方案哪个更好？"

3. **问题诊断**
   - "我的代码运行报这个错误，可能是什么原因？"
   - "测试失败了，帮我分析一下"

4. **代码审查**
   - "我写了这段代码，帮我看看有什么问题"
   - "这里可以优化吗？"

5. **创建下一阶段指南**
   - "我完成第一阶段了，帮我创建第二阶段的指南"

### 提问技巧

**好的提问**：
- 描述清楚你想做什么
- 说明你已经尝试了什么
- 贴出相关代码和错误信息
- 说明你的思考过程

**示例**：
```
我在实现getBean方法时，想实现单例Bean的缓存。
我的思路是使用HashMap存储，key是bean名称，value是实例。
但是我担心并发场景下会有问题，是否需要加锁？
还是有更好的方案？
```

---

## 🎉 完成标志

当你完成所有阶段后，你将拥有：

1. **一个完整的轻量级IoC框架**
   - 支持注解和XML配置
   - 支持依赖注入
   - 支持AOP
   - 支持Web MVC
   - 支持数据访问
   - 支持事务管理
   - 支持自动配置

2. **深入的Spring理解**
   - 理解Spring的核心原理
   - 掌握Spring的设计思想
   - 了解Spring的扩展机制

3. **宝贵的实践经验**
   - 框架设计能力
   - 编码能力提升
   - 问题解决能力
   - 架构思维

4. **可展示的项目**
   - 简历上的亮点
   - 面试时的谈资
   - 技术博客的素材

---

## 📝 下一步

现在开始第一阶段吧！

1. 打开 [phase1-ioc-container.md](./phase1-ioc-container.md)
2. 仔细阅读理论部分
3. 理解设计思路
4. 按照实现步骤开始编码
5. 遇到问题随时问我

祝你学习愉快！加油！💪

