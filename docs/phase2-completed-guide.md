# ç¬¬äºŒé˜¶æ®µå®ŒæˆæŒ‡å—

## ğŸ‰ æ­å–œï¼ç¬¬äºŒé˜¶æ®µä»£ç å·²å‡†å¤‡å°±ç»ª

æˆ‘å·²ç»ä¸ºä½ å‡†å¤‡å¥½äº†ç¬¬äºŒé˜¶æ®µçš„å®Œæ•´å®ç°ï¼ŒåŒ…æ‹¬å±æ€§æ³¨å…¥ã€æ„é€ å™¨æ³¨å…¥å’Œä¸‰çº§ç¼“å­˜å¤„ç†å¾ªç¯ä¾èµ–ã€‚

---

## ğŸ“¦ å·²åˆ›å»ºçš„æ–‡ä»¶

### æ ¸å¿ƒç±»ï¼ˆåŸºç¡€æ•°æ®ç»“æ„ï¼‰
1. **PropertyValue** - å±æ€§å€¼å°è£…
   - ä½ç½®ï¼š`com.litespring.core.PropertyValue`
   - åŠŸèƒ½ï¼šå°è£…å±æ€§åå’Œå€¼

2. **PropertyValues** - å±æ€§å€¼é›†åˆ
   - ä½ç½®ï¼š`com.litespring.core.PropertyValues`
   - åŠŸèƒ½ï¼šå­˜å‚¨Beançš„æ‰€æœ‰å±æ€§

3. **RuntimeBeanReference** - Beanå¼•ç”¨
   - ä½ç½®ï¼š`com.litespring.core.RuntimeBeanReference`
   - åŠŸèƒ½ï¼šæ ‡è®°Beanå¼•ç”¨ï¼ˆåŒºåˆ†æ™®é€šå­—ç¬¦ä¸²ï¼‰

4. **TypedStringValue** - ç±»å‹åŒ–å­—ç¬¦ä¸²å€¼
   - ä½ç½®ï¼š`com.litespring.core.TypedStringValue`
   - åŠŸèƒ½ï¼šå°è£…éœ€è¦ç±»å‹è½¬æ¢çš„å­—ç¬¦ä¸²

5. **ConstructorArgument** - æ„é€ å™¨å‚æ•°
   - ä½ç½®ï¼š`com.litespring.core.ConstructorArgument`
   - åŠŸèƒ½ï¼šå­˜å‚¨æ„é€ å™¨å‚æ•°åˆ—è¡¨

### æ‰©å±•çš„ç±»
6. **BeanDefinition** - å·²æ‰©å±•
   - æ–°å¢ï¼š`PropertyValues` å­—æ®µ
   - æ–°å¢ï¼š`ConstructorArgument` å­—æ®µ

7. **XmlBeanDefinitionReader** - å·²å¢å¼º
   - æ–°å¢ï¼šè§£æ `<property>` å…ƒç´ 
   - æ–°å¢ï¼šè§£æ `<constructor-arg>` å…ƒç´ 

8. **SimpleTypeConverter** - ç±»å‹è½¬æ¢å™¨
   - ä½ç½®ï¼š`com.litespring.util.SimpleTypeConverter`
   - åŠŸèƒ½ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºç›®æ ‡ç±»å‹

### æ ¸å¿ƒå®ç°
9. **DefaultBeanFactory_v2** - å¢å¼ºç‰ˆBeanå·¥å‚ â­æ ¸å¿ƒ
   - ä½ç½®ï¼š`com.litespring.core.DefaultBeanFactory_v2`
   - æ–°å¢åŠŸèƒ½ï¼š
     - ä¸‰çº§ç¼“å­˜ï¼ˆsingletonObjectsã€earlySingletonObjectsã€singletonFactoriesï¼‰
     - å±æ€§æ³¨å…¥ï¼ˆpopulateBeanï¼‰
     - æ„é€ å™¨æ³¨å…¥ï¼ˆinstantiateUsingConstructorï¼‰
     - å¾ªç¯ä¾èµ–æ£€æµ‹å’Œå¤„ç†
     - ç±»å‹è½¬æ¢

### æµ‹è¯•ç±»å’Œæ•°æ®
10. **æµ‹è¯•Beanç±»**ï¼š
    - UserDao / UserDaoImpl
    - UserService (Setteræ³¨å…¥)
    - OrderService (æ„é€ å™¨æ³¨å…¥)
    - CircularA / CircularB (å¾ªç¯ä¾èµ–)

11. **æµ‹è¯•ç±»**ï¼š
    - PropertyInjectionTest (å±æ€§æ³¨å…¥æµ‹è¯•)
    - ConstructorInjectionTest (æ„é€ å™¨æ³¨å…¥æµ‹è¯•)
    - CircularDependencyTest (å¾ªç¯ä¾èµ–æµ‹è¯•)
    - TypeConversionTest (ç±»å‹è½¬æ¢æµ‹è¯•)

12. **XMLé…ç½®**ï¼š
    - beans-v2.xml

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### âš ï¸ é‡è¦è¯´æ˜

æˆ‘åˆ›å»ºäº† `DefaultBeanFactory_v2.java`ï¼Œè¿™æ˜¯å¢å¼ºç‰ˆçš„Beanå·¥å‚ã€‚æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š

#### æ–¹å¼1ï¼šç›´æ¥æµ‹è¯•v2ç‰ˆæœ¬ï¼ˆæ¨èï¼‰

ç›´æ¥è¿è¡Œæµ‹è¯•ï¼Œä¸éœ€è¦æ›¿æ¢åŸæœ‰çš„DefaultBeanFactoryï¼š

```bash
cd /Users/ziyuewen/Devspace/myprj/lite-spring

# åªè¿è¡Œç¬¬äºŒé˜¶æ®µçš„æµ‹è¯•
mvn test -Dtest="com.litespring.test.v2.*"
```

#### æ–¹å¼2ï¼šæ›¿æ¢ä¸ºæ­£å¼ç‰ˆæœ¬

å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œå¯ä»¥æ›¿æ¢åŸæ¥çš„DefaultBeanFactoryï¼š

```bash
# 1. å¤‡ä»½åŸæ–‡ä»¶
mv lite-spring/src/main/java/com/litespring/core/DefaultBeanFactory.java \
   lite-spring/src/main/java/com/litespring/core/DefaultBeanFactory_v1_backup.java

# 2. é‡å‘½åv2ä¸ºæ­£å¼ç‰ˆ
mv lite-spring/src/main/java/com/litespring/core/DefaultBeanFactory_v2.java \
   lite-spring/src/main/java/com/litespring/core/DefaultBeanFactory.java

# 3. ä¿®æ”¹ç±»åï¼ˆåœ¨IDEä¸­æˆ–æ‰‹åŠ¨ç¼–è¾‘ï¼‰
# å°† class DefaultBeanFactory_v2 æ”¹ä¸º class DefaultBeanFactory
```

---

## âœ… è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰ç¬¬äºŒé˜¶æ®µæµ‹è¯•

```bash
mvn test -Dtest="com.litespring.test.v2.*"
```

### è¿è¡Œå•ä¸ªæµ‹è¯•

```bash
# å±æ€§æ³¨å…¥æµ‹è¯•
mvn test -Dtest=PropertyInjectionTest

# æ„é€ å™¨æ³¨å…¥æµ‹è¯•
mvn test -Dtest=ConstructorInjectionTest

# å¾ªç¯ä¾èµ–æµ‹è¯•
mvn test -Dtest=CircularDependencyTest

# ç±»å‹è½¬æ¢æµ‹è¯•
mvn test -Dtest=TypeConversionTest
```

### åœ¨IDEä¸­è¿è¡Œ

1. æ‰“å¼€ä»»æ„æµ‹è¯•ç±»ï¼ˆå¦‚ `PropertyInjectionTest`ï¼‰
2. ç‚¹å‡»ç±»åæˆ–æ–¹æ³•åæ—è¾¹çš„ç»¿è‰²è¿è¡ŒæŒ‰é’®
3. é€‰æ‹© "Run" æˆ– "Debug"

---

## ğŸ“š ä»£ç å­¦ä¹ è¦ç‚¹

### 1. ç†è§£ä¸‰çº§ç¼“å­˜

æŸ¥çœ‹ `DefaultBeanFactory_v2` ä¸­çš„ä¸‰ä¸ªç¼“å­˜ï¼š

```java
// ä¸€çº§ç¼“å­˜ï¼šå®Œæ•´çš„Bean
private Map<String, Object> singletonObjects;

// äºŒçº§ç¼“å­˜ï¼šæ—©æœŸå¼•ç”¨
private Map<String, Object> earlySingletonObjects;

// ä¸‰çº§ç¼“å­˜ï¼šå¯¹è±¡å·¥å‚
private Map<String, ObjectFactory> singletonFactories;
```

**ç†è§£getSingletonæ–¹æ³•çš„ä¸‰çº§æŸ¥æ‰¾æµç¨‹**ï¼š
1. å…ˆä»ä¸€çº§ç¼“å­˜è·å–ï¼ˆå®Œæ•´Beanï¼‰
2. å¦‚æœBeanæ­£åœ¨åˆ›å»ºï¼Œä»äºŒçº§ç¼“å­˜è·å–ï¼ˆæ—©æœŸå¼•ç”¨ï¼‰
3. å¦‚æœäºŒçº§ç¼“å­˜ä¹Ÿæ²¡æœ‰ï¼Œä»ä¸‰çº§ç¼“å­˜è·å–å·¥å‚å¹¶åˆ›å»º

### 2. ç†è§£å±æ€§æ³¨å…¥

æŸ¥çœ‹ `populateBean` æ–¹æ³•ï¼š
- ä½¿ç”¨Javaå†…çœAPI (`Introspector`)
- æŸ¥æ‰¾PropertyDescriptor
- è°ƒç”¨setteræ–¹æ³•
- ç±»å‹è½¬æ¢

### 3. ç†è§£æ„é€ å™¨æ³¨å…¥

æŸ¥çœ‹ `instantiateUsingConstructor` æ–¹æ³•ï¼š
- è§£ææ„é€ å™¨å‚æ•°
- æŸ¥æ‰¾åŒ¹é…çš„æ„é€ å™¨
- æ”¯æŒç±»å‹å…¼å®¹åŒ¹é…

### 4. ç†è§£å¾ªç¯ä¾èµ–è§£å†³

**Setteræ³¨å…¥çš„å¾ªç¯ä¾èµ–è§£å†³æµç¨‹**ï¼š
```
1. åˆ›å»ºAå®ä¾‹ â†’ æ”¾å…¥ä¸‰çº§ç¼“å­˜
2. å¡«å……Açš„å±æ€§ï¼Œéœ€è¦B
3. åˆ›å»ºBå®ä¾‹ â†’ æ”¾å…¥ä¸‰çº§ç¼“å­˜
4. å¡«å……Bçš„å±æ€§ï¼Œéœ€è¦A
5. ä»ä¸‰çº§ç¼“å­˜è·å–A â†’ æ”¾å…¥äºŒçº§ç¼“å­˜
6. Bå®Œæˆ â†’ æ”¾å…¥ä¸€çº§ç¼“å­˜
7. Aå®Œæˆ â†’ æ”¾å…¥ä¸€çº§ç¼“å­˜
```

### 5. ç†è§£RuntimeBeanReferenceçš„ä½œç”¨

å¯¹æ¯”ä¸¤ç§æƒ…å†µï¼š
```xml
<!-- Beanå¼•ç”¨ â†’ RuntimeBeanReference -->
<property name="userDao" ref="userDao"/>

<!-- å­—ç¬¦ä¸²å€¼ â†’ TypedStringValue -->
<property name="name" value="userDao"/>
```

åœ¨å±æ€§æ³¨å…¥æ—¶ï¼š
- RuntimeBeanReference â†’ è°ƒç”¨ `getBean()` è·å–Beanå®ä¾‹
- TypedStringValue â†’ è¿›è¡Œç±»å‹è½¬æ¢

---

## ğŸ¯ å…³é”®æ–¹æ³•è§£æ

### æ ¸å¿ƒæ–¹æ³•1ï¼šdoGetBean

è¿™æ˜¯è·å–Beançš„æ ¸å¿ƒå…¥å£ï¼š
```
1. å°è¯•ä»ä¸‰çº§ç¼“å­˜è·å–
2. å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºBean
3. å•ä¾‹Beanèµ°getSingleton(name, factory)
4. åŸå‹Beanæ¯æ¬¡éƒ½åˆ›å»º
```

### æ ¸å¿ƒæ–¹æ³•2ï¼šcreateBean

Beanåˆ›å»ºçš„æ ¸å¿ƒæµç¨‹ï¼š
```
1. instantiateBean - å®ä¾‹åŒ–
2. addSingletonFactory - æå‰æš´éœ²ï¼ˆæ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼‰
3. populateBean - å±æ€§æ³¨å…¥
4. è¿”å›Bean
```

### æ ¸å¿ƒæ–¹æ³•3ï¼špopulateBean

å±æ€§æ³¨å…¥çš„æ ¸å¿ƒï¼š
```
1. è·å–PropertyValues
2. éå†æ¯ä¸ªPropertyValue
3. è§£æå€¼ï¼ˆBeanå¼•ç”¨ vs ç®€å•å€¼ï¼‰
4. æŸ¥æ‰¾setteræ–¹æ³•
5. ç±»å‹è½¬æ¢
6. è°ƒç”¨setter
```

### æ ¸å¿ƒæ–¹æ³•4ï¼šgetSingleton

ä¸‰çº§ç¼“å­˜æŸ¥æ‰¾ï¼š
```
1. ä»ä¸€çº§ç¼“å­˜è·å– â†’ æœ‰åˆ™è¿”å›
2. æ£€æŸ¥æ˜¯å¦æ­£åœ¨åˆ›å»º â†’ æ˜¯åˆ™ç»§ç»­
3. ä»äºŒçº§ç¼“å­˜è·å– â†’ æœ‰åˆ™è¿”å›
4. ä»ä¸‰çº§ç¼“å­˜è·å–å·¥å‚ â†’ åˆ›å»ºå¹¶å‡çº§åˆ°äºŒçº§ç¼“å­˜
```

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹è¯´æ˜

### PropertyInjectionTest

æµ‹è¯•å†…å®¹ï¼š
- Beanå¼•ç”¨æ³¨å…¥
- intå€¼æ³¨å…¥
- Stringå€¼æ³¨å…¥
- å•ä¾‹Beanå…±äº«

### ConstructorInjectionTest

æµ‹è¯•å†…å®¹ï¼š
- æ„é€ å™¨Beanå¼•ç”¨æ³¨å…¥
- æ„é€ å™¨ç®€å•å€¼æ³¨å…¥
- finalå­—æ®µéªŒè¯

### CircularDependencyTest

æµ‹è¯•å†…å®¹ï¼š
- âœ… Setteræ³¨å…¥çš„å¾ªç¯ä¾èµ–ï¼ˆèƒ½å¤Ÿè§£å†³ï¼‰
- âŒ æ„é€ å™¨æ³¨å…¥çš„å¾ªç¯ä¾èµ–ï¼ˆæŠ›å‡ºå¼‚å¸¸ï¼‰
- âŒ åŸå‹Beançš„å¾ªç¯ä¾èµ–ï¼ˆæŠ›å‡ºå¼‚å¸¸ï¼‰

### TypeConversionTest

æµ‹è¯•å†…å®¹ï¼š
- å„ç§åŸºæœ¬ç±»å‹è½¬æ¢
- booleançš„å¤šç§æ ¼å¼ï¼ˆtrue/yes/1/onï¼‰
- nullå€¼å¤„ç†
- ç©ºå­—ç¬¦ä¸²å¤„ç†
- è½¬æ¢å¤±è´¥å¤„ç†

---

## ğŸ’¡ è°ƒè¯•å»ºè®®

### 1. è§‚å¯ŸBeanåˆ›å»ºè¿‡ç¨‹

åœ¨è¿™äº›æ–¹æ³•æ‰“æ–­ç‚¹ï¼š
- `doGetBean` - è§‚å¯Ÿè·å–Beanæµç¨‹
- `createBean` - è§‚å¯ŸBeanåˆ›å»ºæµç¨‹
- `populateBean` - è§‚å¯Ÿå±æ€§æ³¨å…¥æµç¨‹
- `getSingleton` - è§‚å¯Ÿä¸‰çº§ç¼“å­˜æŸ¥æ‰¾

### 2. è§‚å¯Ÿå¾ªç¯ä¾èµ–è§£å†³

è¿è¡Œ `CircularDependencyTest.testSetterCircularDependency()`ï¼š
1. åœ¨ `addSingletonFactory` æ‰“æ–­ç‚¹
2. åœ¨ `getSingleton` æ‰“æ–­ç‚¹
3. è§‚å¯Ÿä¸‰çº§ç¼“å­˜çš„å˜åŒ–

### 3. æŸ¥çœ‹æ—¥å¿—è¾“å‡º

æµ‹è¯•Beançš„æ„é€ å‡½æ•°å’Œsetteræ–¹æ³•éƒ½æœ‰æ‰“å°è¯­å¥ï¼Œè¿è¡Œæµ‹è¯•æ—¶æŸ¥çœ‹è¾“å‡ºï¼š
```
CircularAå®ä¾‹è¢«åˆ›å»º
CircularBå®ä¾‹è¢«åˆ›å»º
CircularBæ³¨å…¥CircularA
CircularAæ³¨å…¥CircularB
```

---

## ğŸ¤” æ€è€ƒé¢˜å›é¡¾

å®Œæˆä»£ç é˜…è¯»åï¼Œå›é¡¾ä¹‹å‰çš„æ€è€ƒé¢˜ï¼š

1. **ä¸ºä»€ä¹ˆéœ€è¦RuntimeBeanReferenceï¼Ÿ**
   - æŸ¥çœ‹ `resolveValueIfNecessary` æ–¹æ³•
   - çœ‹å®ƒå¦‚ä½•åŒºåˆ†Beanå¼•ç”¨å’Œå­—ç¬¦ä¸²å€¼

2. **ä¸‰çº§ç¼“å­˜çš„ä½œç”¨ï¼Ÿ**
   - æŸ¥çœ‹ `getSingleton` æ–¹æ³•
   - çœ‹ä¸‰ä¸ªç¼“å­˜æ˜¯å¦‚ä½•åä½œçš„

3. **æ„é€ å™¨å¾ªç¯ä¾èµ–ä¸ºä»€ä¹ˆæ— æ³•è§£å†³ï¼Ÿ**
   - æŸ¥çœ‹ `instantiateUsingConstructor` æ–¹æ³•
   - æ€è€ƒï¼šå®ä¾‹éƒ½æ²¡åˆ›å»ºï¼Œå¦‚ä½•æå‰æš´éœ²ï¼Ÿ

4. **åŸå‹Beanèƒ½è§£å†³å¾ªç¯ä¾èµ–å—ï¼Ÿ**
   - æŸ¥çœ‹åŸå‹Beançš„åˆ›å»ºé€»è¾‘
   - çœ‹æ˜¯å¦ä½¿ç”¨äº†ç¼“å­˜

5. **ç±»å‹è½¬æ¢çš„è¾¹ç•Œæƒ…å†µï¼Ÿ**
   - æŸ¥çœ‹ `SimpleTypeConverter` ç±»
   - çœ‹å¦‚ä½•å¤„ç†nullã€ç©ºå­—ç¬¦ä¸²ã€è½¬æ¢å¤±è´¥

---

## ğŸ“Š ä¸ç¬¬ä¸€é˜¶æ®µçš„å¯¹æ¯”

| åŠŸèƒ½ | ç¬¬ä¸€é˜¶æ®µ | ç¬¬äºŒé˜¶æ®µ |
|------|---------|---------|
| **Beanåˆ›å»º** | âœ… æ— å‚æ„é€  | âœ… æ— å‚+æœ‰å‚æ„é€  |
| **å±æ€§æ³¨å…¥** | âŒ ä¸æ”¯æŒ | âœ… Setteræ³¨å…¥ |
| **æ„é€ å™¨æ³¨å…¥** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| **Beanå¼•ç”¨** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| **ç±»å‹è½¬æ¢** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ8ç§åŸºæœ¬ç±»å‹ |
| **å¾ªç¯ä¾èµ–** | âŒ æœªå¤„ç† | âœ… ä¸‰çº§ç¼“å­˜å¤„ç† |
| **ç¼“å­˜æœºåˆ¶** | ä¸€çº§ç¼“å­˜ | ä¸‰çº§ç¼“å­˜ |

---

## ğŸ¯ éªŒè¯å®Œæˆæ ‡å‡†

å®Œæˆç¬¬äºŒé˜¶æ®µåï¼Œç¡®è®¤ä»¥ä¸‹åŠŸèƒ½ï¼š

- [ ] Setteræ–¹å¼æ³¨å…¥Beanå¼•ç”¨
- [ ] Setteræ–¹å¼æ³¨å…¥ç®€å•å€¼ï¼ˆintã€Stringç­‰ï¼‰
- [ ] æ„é€ å™¨æ³¨å…¥Beanå¼•ç”¨
- [ ] æ„é€ å™¨æ³¨å…¥ç®€å•å€¼
- [ ] è‡ªåŠ¨è§£å†³Setteræ³¨å…¥çš„å¾ªç¯ä¾èµ–
- [ ] æ£€æµ‹å¹¶æ‹’ç»æ„é€ å™¨æ³¨å…¥çš„å¾ªç¯ä¾èµ–
- [ ] æ£€æµ‹å¹¶æ‹’ç»åŸå‹Beançš„å¾ªç¯ä¾èµ–
- [ ] æ”¯æŒ8ç§åŸºæœ¬ç±»å‹çš„è‡ªåŠ¨è½¬æ¢
- [ ] æ”¯æŒbooleançš„å¤šç§æ ¼å¼ï¼ˆtrue/yes/1ç­‰ï¼‰
- [ ] æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡

---

## ğŸš€ ä¸‹ä¸€æ­¥

å®Œæˆç¬¬äºŒé˜¶æ®µåï¼Œä½ å¯ä»¥ï¼š

1. **ç†è§£ä»£ç **ï¼ˆ2-4å°æ—¶ï¼‰
   - é˜…è¯»æ ¸å¿ƒç±»çš„å®ç°
   - è°ƒè¯•è¿è¡Œæµ‹è¯•
   - å›ç­”æ€è€ƒé¢˜

2. **å¯¹æ¯”Springæºç **
   - AbstractAutowireCapableBeanFactory.doCreateBean
   - DefaultSingletonBeanRegistry.getSingleton
   - AbstractBeanFactory.doGetBean

3. **å‡†å¤‡ç¬¬ä¸‰é˜¶æ®µ**
   - Beanç”Ÿå‘½å‘¨æœŸç®¡ç†
   - InitializingBeanæ¥å£
   - BeanPostProcessoræ‰©å±•ç‚¹
   - åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•çš„å®é™…è°ƒç”¨

---

## ğŸ’¬ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆåˆ›å»ºäº†v2ç‰ˆæœ¬è€Œä¸æ˜¯ç›´æ¥æ›¿æ¢ï¼Ÿ

A: ä¸ºäº†ä¿æŒç¬¬ä¸€é˜¶æ®µçš„ä»£ç å®Œæ•´æ€§ï¼Œæ–¹ä¾¿å¯¹æ¯”å­¦ä¹ ã€‚ä½ å¯ä»¥ï¼š
- ä¿ç•™ä¸¤ä¸ªç‰ˆæœ¬å¯¹æ¯”
- æˆ–è€…æ›¿æ¢ä¸ºæ­£å¼ç‰ˆæœ¬

### Q2: æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: 
1. æ£€æŸ¥Javaç‰ˆæœ¬ï¼ˆéœ€è¦11+ï¼‰
2. è¿è¡Œ `mvn clean compile`
3. æŸ¥çœ‹å…·ä½“çš„é”™è¯¯ä¿¡æ¯
4. æ£€æŸ¥XMLé…ç½®è·¯å¾„æ˜¯å¦æ­£ç¡®

### Q3: DefaultBeanFactory_v2ä¸­çš„ObjectFactoryæ˜¯ä»€ä¹ˆï¼Ÿ

A: è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼ˆJava 8ç‰¹æ€§ï¼‰ï¼Œç”¨äºä¸‰çº§ç¼“å­˜ã€‚å®ƒå…è®¸å»¶è¿Ÿåˆ›å»ºå¯¹è±¡ï¼ˆæ”¯æŒAOPä»£ç†çš„å»¶è¿Ÿåˆ›å»ºï¼‰ã€‚

### Q4: ä¸ºä»€ä¹ˆä½¿ç”¨Javaå†…çœAPIï¼Ÿ

A: `Introspector` å’Œ `PropertyDescriptor` æ˜¯Javaæ ‡å‡†APIï¼Œç”¨äºï¼š
- å‘ç°Beançš„å±æ€§
- è·å–getter/setteræ–¹æ³•
- æ¯”æ‰‹åŠ¨æ‹¼æ¥æ–¹æ³•åæ›´å¯é 

### Q5: ç±»å‹è½¬æ¢åªæ”¯æŒ8ç§åŸºæœ¬ç±»å‹å—ï¼Ÿ

A: ç¬¬äºŒé˜¶æ®µå®ç°äº†å¸¸ç”¨ç±»å‹ã€‚åç»­å¯ä»¥æ‰©å±•ï¼š
- ä½¿ç”¨Springçš„ConversionService
- æ”¯æŒè‡ªå®šä¹‰ç±»å‹è½¬æ¢å™¨
- æ”¯æŒæ›´å¤æ‚çš„ç±»å‹ï¼ˆDateã€Listç­‰ï¼‰

---

## ğŸŠ æ€»ç»“

ç¬¬äºŒé˜¶æ®µå®Œæˆåï¼Œä½ å°†ï¼š
- âœ… æŒæ¡ä¾èµ–æ³¨å…¥çš„æ ¸å¿ƒåŸç†
- âœ… ç†è§£ä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–
- âœ… äº†è§£Setteræ³¨å…¥ vs æ„é€ å™¨æ³¨å…¥
- âœ… æŒæ¡ç±»å‹è½¬æ¢çš„å®ç°
- âœ… ç†è§£Spring IoCå®¹å™¨çš„æ ¸å¿ƒæœºåˆ¶

**è¿™æ˜¯æ•´ä¸ªæ¡†æ¶æœ€æ ¸å¿ƒã€æœ€å¤æ‚çš„éƒ¨åˆ†ï¼**

æŒæ¡äº†è¿™éƒ¨åˆ†ï¼Œä½ å°±ç†è§£äº†Springçš„ç²¾é«“ï¼ğŸ’ª

æœ‰ä»»ä½•é—®é¢˜éšæ—¶é—®æˆ‘ï¼ğŸš€

